<!DOCTYPE html>
<html ng-app="app">

<head lang- "en">
    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!--Import materialize.css-->
    <link type="text/css" rel="stylesheet" href="./node_modules/materialize-css/dist/css/materialize.min.css" media="screen,projection" />
    
    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TSA Claims Data</title>
    <meta charset="UTF-8">
</head>

<body>
    <div class="container">
<!-- Begin navigation bar -->

    <nav>
        <div class="nav-wrapper" ng-controller="nav">
            <a href="#!" class="brand-logo"><i class="large material-icons">airplanemode_active</i>TSA Claims Data</a>
            <a href="#" data-target="mobile-demo" class="sidenav-trigger">
                <i class="material-icons">menu</i>
            </a>
            <ul id="nav-mobile" class="right hide-on-med-and-down">
                <li>
                    <a href="#">{{4+4}}</a>
                </li>
                <li>
                    <a href="#">Value Lost per Month</a>
                </li>
                <li>
                    <a href="#">Average Claims per Month</a>
                </li>
                <li>
                    <a href="#">Upload file</a>
                </li>
            </ul>
        </div>
    </nav>
    <!-- Sidenav appears on small screens -->
    <ul class="sidenav" id="mobile-demo">
        <li>
            <a href="#">{{4+4}}</a>
        </li>
        <li>
            <a href="#">Value Lost per Month</a>
        </li>
        <li>
            <a href="#">Average Claims per Month</a>
        </li>
        <li>
            <a href="#">Upload file</a>
        </li>
    </ul>    
<!-- End navigation bar -->
<!-- Value lost graph -->
<div class="row">
    <div class="col s12">
        <div ng-controller="linegraphs as vt">
            <h2>Value Lost per Month</h2>
            <p>This chart shows the total value lost per month, by airline.  The average monthly loss is included for context.</p>
            {{test2}}

            <canvas chart-options="vt.chartLineOptions" id="line" class="chart chart-line" chart-data="vt.chartLineCharts" chart-labels="vt.chartLineLabels"
                chart-legend="true" chart-series="vt.chartLineSeries" chart-colours="vt.chartLineColours">
            </canvas>
            <div class="divider"></div>
        </div>
    </div>
</div>
<!-- End Value lost graph -->
<!-- Average Claims graph -->

<div class="row">
    <div class="col s12">
        <div ng-controller="barchart as vt">
            <h2>Average Claims per Month</h2>
            <p>This chart shows the average claim per month, by airline code. Each bar shows the arithmatic mean and standard deviation.</p>
            {{test2}}

            <canvas chart-options="vt.barChartOptions" id="bar" class="chart chart-bar" chart-data="vt.barChartCharts" chart-labels="vt.barChartLabels"
                chart-legend="true" chart-series="vt.barChartSeries" chart-colours="vt.barChartColours">
            </canvas>
            <div class="divider"></div>
        </div>
    </div>
</div>

<!-- End Average Claims graph -->
<!-- Footer -->
    <footer class="page-footer">
        <div class="container">
            <div class="row">
                <div class="col l6 s12">
                    <h5 class="white-text">Mahalo</h5>
                    <p class="grey-text text-lighten-4">Thanks for the opportunity to complete this coding project.  It was an adventure learning AngularJS, and it's gonna be fun talking things.</p>
                </div>
                <div class="col l4 offset-l2 s12">
                    <h5 class="white-text">&nbsp;</h5>
                    <ul>
                        <li>
                            <a class="grey-text text-lighten-3" href="https://www.dhs.gov/sites/default/files/publications/claims-2010-2013_0.xls">Get TSA Data</a>
                        </li>
                        <li>
                            <a class="grey-text text-lighten-3" href="https://github.com/marclevetin/">Marc Levetin's Github</a>
                        </li>
                        <li>
                            <a class="grey-text text-lighten-3" href="https://www.linkedin.com/in/marclevetin/">Marc Levetin LinkedIn</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="footer-copyright">
            <div class="container">
                Â© 2018
            </div>
        </div>
    </footer>
<!-- End Footer -->
    </div>
    
<!-- Javascript files -->
    <script src="./node_modules/angular/angular.js"></script>
    <script src="./node_modules/chart.js/dist/Chart.min.js"></script>
    <script src="./node_modules/angular-chart.js/dist/angular-chart.min.js"></script>
    <script>
        var app = angular.module('app', ['chart.js']);

        app.controller('nav', function($scope) {
            $scope.test = "hi"
        });

        app.controller('linegraphs', function ($scope,$http) {
            $scope.test2 = "Remember to remove this.";

            var vt = this;

            // Line Chart

            vt.chartLineLabels = [
                "January",
                "February",
                "March",
                "April",
                "May",
                "June",
                "July"
            ];

            vt.chartLineSeries = ["New Users", "Global Quizz Results in %"];

            vt.chartLineCharts = [];

            // API Request
            $http(
                {
                    method: 'GET',
                    url: 'http://www.json-generator.com/api/json/get/clayCfTkzm?indent=2'
                })
                .then(function (data) {
                    var array = data.data // TODO: not sure why the $http returns a different object here than in the tutorial.  Investigate later.
                    angular.forEach(array, function (chartLineData) {
                        vt.chartLineCharts.push(chartLineData.chart);
                    });
                });

            vt.chartLineOptions = {
                maintainAspectRatio: false,
                responsive: true
            };

            vt.chartLineColours = ["#494750", "#cc3321"];

        });

        app.controller('barchart', function ($scope, $http) {
                $scope.test2 = "Remember to remove this.";

                var vt = this;

                // Bar Chart

                vt.barChartLabels = [
                    "January",
                    "February",
                    "March",
                    "April",
                    "May",
                    "June",
                    "July"
                ];

                vt.barChartSeries = ["New Users", "Global Quizz Results in %"];

                vt.barChartCharts = [];

                // API Request
                $http(
                    {
                        method: 'GET',
                        url: 'http://www.json-generator.com/api/json/get/clayCfTkzm?indent=2'
                    })
                    .then(function (data) {
                        var array = data.data // TODO: not sure why the $http returns a different object here than in the tutorial.  Investigate later.
                        angular.forEach(array, function (barChartData) {
                            vt.barChartCharts.push(barChartData.chart);
                        });
                    });

                vt.barChartOptions = {
                    maintainAspectRatio: false,
                    responsive: true
                };

                vt.barChartColours = ["#494750", "#cc3321"];

            });

        
    </script>
    <!--JavaScript at end of body for optimized loading-->
    <script type="text/javascript" src="./node_modules/materialize-css/dist/js/materialize.min.js"></script>
    <script type="text/javascript" src="./js/materializeCustomizations.js"></script>
</body>

</html>