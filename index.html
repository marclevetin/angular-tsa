<!DOCTYPE html>
<html ng-app="app">

<head lang- "en">
    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!--Import materialize.css-->
    <link type="text/css" rel="stylesheet" href="./node_modules/materialize-css/dist/css/materialize.min.css" media="screen,projection" />
    
    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TSA Claims Data</title>
    <meta charset="UTF-8">
</head>

<body>
    <div class="container">
<!-- Begin navigation bar -->
    <nav>
        <div class="nav-wrapper" ng-controller="nav">
            <a href="#!" class="brand-logo">TSA Claims Data</a>
            <a href="#" data-target="mobile-demo" class="sidenav-trigger">
                <i class="material-icons">menu</i>
            </a>
            <ul id="nav-mobile" class="right hide-on-med-and-down">
                <li>
                    <a href="#">{{4+4}}</a>
                </li>
                <li>
                    <a href="#">Value Lost per Month</a>
                </li>
                <li>
                    <a href="#">Average Claims per Month</a>
                </li>
                <li>
                    <a href="#">Upload file</a>
                </li>
            </ul>
        </div>
    </nav>
    <!-- Sidenav appears on small screens -->
    <ul class="sidenav" id="mobile-demo">
        <li>
            <a href="#">{{4+4}}</a>
        </li>
        <li>
            <a href="#">Value Lost per Month</a>
        </li>
        <li>
            <a href="#">Average Claims per Month</a>
        </li>
        <li>
            <a href="#">Upload file</a>
        </li>
    </ul>    
<!-- End navigation bar -->
<div class="row">
    <div class="col s12">
        <div ng-controller="graphs as vt">
            <h2>Value Lost per Month</h2>
            <p>This chart shows the total value lost per month, by airline.  The average monthly loss is included for context.</p>
            {{test2}}

            <canvas chart-options="vt.chartLineOptions" id="line" class="chart chart-line" chart-data="vt.chartLineCharts" chart-labels="vt.chartLineLabels"
                chart-legend="true" chart-series="vt.chartLineSeries" chart-colours="vt.chartLineColours">
            </canvas>
            <div class="divider"></div>
        </div>
    </div>
</div>
    <p>footer</p>
    </div>
    
<!-- Javascript files -->
    <script src="./node_modules/angular/angular.js"></script>
    <script src="./node_modules/chart.js/dist/Chart.min.js"></script>
    <script src="./node_modules/angular-chart.js/dist/angular-chart.min.js"></script>
    <script>
        var app = angular.module('app', ['chart.js']);

        app.controller('nav', function($scope) {
            $scope.test = "hi"
        });

        app.controller('graphs', function ($scope,$http) {
            $scope.test2 = "mom";

            var vt = this;

            // Line Chart

            vt.chartLineLabels = [
                "January",
                "February",
                "March",
                "April",
                "May",
                "June",
                "July"
            ];

            vt.chartLineSeries = ["New Users", "Global Quizz Results in %"];

            vt.chartLineCharts = [];

            // API Request
            $http(
                {
                    method: 'GET',
                    url: 'http://www.json-generator.com/api/json/get/clayCfTkzm?indent=2'
                })
                .then(function (data) {
                    var array = data.data // TODO: not sure why the $http returns a different object here than in the tutorial.  Investigate later.
                    angular.forEach(array, function (chartLineData) {
                        vt.chartLineCharts.push(chartLineData.chart);
                    });
                    console.log(vt.chartLineCharts);
                });

            vt.chartLineOptions = {
                maintainAspectRatio: false,
                responsive: true
            };

            vt.chartLineColours = ["#494750", "#cc3321"];

        });

        
    </script>
    <!--JavaScript at end of body for optimized loading-->
    <script type="text/javascript" src="./node_modules/materialize-css/dist/js/materialize.min.js"></script>
    <script type="text/javascript" src="./js/materializeCustomizations.js"></script>
</body>

</html>